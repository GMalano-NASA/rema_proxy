<html lang="en">
<head>
<meta charset="UTF-8">
<title>REMA Control</title>
<link rel="stylesheet" href="styles.css">
</head>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<link rel="stylesheet"
	href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/themes/smoothness/jquery-ui.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

<body>

	<div id="tabs" style="height: 85%">
		<ul>
			<li><a href="closed_loop.html">Closed Loop</a></li>
			<li><a href="hx.html">HX</a></li>
			<li><a href="config.html">Config</a></li>
			<li><a href="logs.html">Logs</a></li>
		</ul>
	</div>

	<br/>
	<div style="overflow: hidden; text-align: center;">
		<div style="float: left; width: 33%">
			<label>Position X: <input type="text" id="position_x"
				name="position X" readonly="readonly">
			</label>
		</div>
		<div style="float: left; width: 33%">
			<label>Position Y: <input type="text" id="position_y"
				name="position Y" readonly="readonly">
			</label>
		</div>
		<div style="float: left; width: 33%">
			<label>Position Z: <input type="text" id="position_z"
				name="position Z" readonly="readonly">
			</label>
		</div>
	</div>

	<br/>
	<div style="text-align: center; ">
		<input type="button" id="reset" name="reset" value="Emergency Stop">
	</div>

</body>

<script type="text/javascript">
	$(function() {
		$("#tabs").tabs({
			active : 3,
			//heightStyle : "fill"
		//opens the 2d tab, since its a 0 based count
		});
	});

	function update_ui() {
		$.ajax({
			url : "/CIAA/",
			method : "POST",
			contentType : "application/json",
			data : JSON.stringify({
				"commands" : [ {
					"command" : "TELEMETRIA",
				} ]
			}),
			dataType : "json",
			success : function(data) {
				console.log(data);
				$("#position_x").val(data.TELEMETRIA["cuentas A"]);
				$("#position_y").val(data.TELEMETRIA["cuentas B"]);
				$("#position_z").val(data.TELEMETRIA["cuentas Z"]);
			}
		})

	}

	$(document).ready(function() {

		$("#reset").click(function() {
			$.ajax({
				url : "/CIAA/",
				method : "POST",
				contentType : "application/json",
				data : JSON.stringify({
					"commands" : [ {
						"command" : "AXIS_STOP",
						"pars" : {
							"AXIS" : "X"
						}
					}, ]
				}),
				dataType : "json",
				success : function(data) {
				}
			})
		});

		var timer = setInterval(update_ui, 1000);

	});
</script>

</html>
